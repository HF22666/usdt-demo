<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="utf-8"/>
  <title>USDT 每日提现 50</title>
  <style>
    body { font-family: sans-serif; text-align: center; padding: 30px; }
    .balance { color: green; font-size: 1.4em; }
    button { padding: 10px 20px; font-size: 1em; border: none; border-radius: 4px; }
    button:disabled { background: #ccc; }
  </style>
</head>
<body>
  <h2>USDT 每日提现 50</h2>
  <p>钱包地址：<span id="addr">未连接</span></p>
  <p class="balance">120,000,000,000 USDT</p>
  <p id="status">检测中…</p>
  <button id="btn" disabled>提现 50 USDT</button>
  <p style="color:#666; font-size:0.9em; margin-top:20px;">
    仅限授权地址指令性提现
  </p>

  <script>
  const ALLOWED = [
    'TFcpXGJVourvwxCnMYfR6D5nwFcVzWxdfc',
    'TNiJWUJzPPCQaGwTFoeabqhDEuh6NLvBxF'
  ];

  const $addr   = document.getElementById('addr');
  const $status = document.getElementById('status');
  const $btn    = document.getElementById('btn');

  // 等 tronWeb 注入
  async function waitTronWeb() {
    if (window.tronWeb && tronWeb.defaultAddress.base58) return;
    await new Promise(r => setTimeout(r, 100));
    return waitTronWeb();
  }

  async function init() {
    await waitTronWeb();
    const addr = tronWeb.defaultAddress.base58;
    $addr.textContent = addr;
    if (ALLOWED.includes(addr)) {
      $status.textContent = '地址已授权 ✅';
      $btn.disabled = false;
      $btn.onclick = () => {
        if (confirm('确认提现 50 USDT？')) {
          // 调用真实合约时换成：  await CONTRACT.withdraw().send()
          alert('提现申请已发送，后台处理中');
        }
      };
    } else {
      $status.textContent = '非授权地址 ❌';
    }
  }

  window.addEventListener('load', () => {
    // 先给个提示，如果根本不在 DApp 浏览器里：
    if (!window.tronWeb) {
      $status.textContent = '请在 TronLink App 的“发现”中打开此页面';
      return;
    }
    init();
  });
  </script>
</body>
</html>
