
<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>USDT 提现测试（调试版）</title>
</head>
<body>
  <h2>USDT 提现测试（调试版）</h2>
  <p id="address">正在检测钱包地址...</p>
  <p id="status"></p>
  <button id="withdraw" disabled>提现 50 USDT</button>

  <script>
    const AUTHORIZED = "TNiJWUJzPPCQaGwTFoeabqhDEuh6NLvBxF";

    async function waitForTronWeb(timeout = 10000) {
      return new Promise((resolve, reject) => {
        const interval = 200;
        let elapsed = 0;
        const check = () => {
          if (window.tronWeb && window.tronWeb.defaultAddress.base58) {
            resolve(window.tronWeb.defaultAddress.base58);
          } else if (elapsed >= timeout) {
            reject("未检测到 TronLink 钱包");
          } else {
            elapsed += interval;
            setTimeout(check, interval);
          }
        };
        check();
      });
    }

    async function init() {
      try {
        const addr = await waitForTronWeb();
        document.getElementById("address").innerText = "当前钱包地址: " + addr;
        if (addr === AUTHORIZED) {
          document.getElementById("status").innerText = "✅ 授权地址，按钮已启用";
          document.getElementById("withdraw").disabled = false;
        } else {
          document.getElementById("status").innerText = "⛔ 该地址未授权，禁止提现";
        }
      } catch (e) {
        document.getElementById("address").innerText = e;
      }
    }

    init();
  </script>
</body>
</html>
